/* ══════════════════════════════════════════════════
   ChatFaces – Background on <html> + Transparency
   ══════════════════════════════════════════════════ */

/* ── Background via ::before pseudo-element for animation ── */
html.chatfaces-active {
  position: relative !important;
}

html.chatfaces-active::before {
  content: "";
  position: fixed;
  inset: 0;
  z-index: 0;
  background: var(--chatfaces-bg) center center / cover no-repeat fixed;
  background-color: #0a0a14;
  opacity: var(--chatfaces-opacity, 0);
  transition: opacity 2s cubic-bezier(0.25, 0, 0.15, 1);
  pointer-events: none;
}

/* ══════════════════════════════════════════════════
   Make EVERYTHING on the page transparent so the
   html background shows through everywhere.
   ══════════════════════════════════════════════════ */

/* Body — transparent and above the ::before pseudo */
html.chatfaces-active body {
  background: transparent !important;
  position: relative !important;
  z-index: 1 !important;
}

/* All nested containers — nuclear approach */
html.chatfaces-active body > div,
html.chatfaces-active body > div > div,
html.chatfaces-active body > div > div > div,
html.chatfaces-active body > div > div > div > div,
html.chatfaces-active body > div > div > div > div > div,
html.chatfaces-active main,
html.chatfaces-active header,
html.chatfaces-active nav,
html.chatfaces-active aside,
html.chatfaces-active [class*="bg-token"],
html.chatfaces-active [class*="bg-white"],
html.chatfaces-active [class*="bg-gray"],
html.chatfaces-active [class*="bg-black"],
html.chatfaces-active [class*="bg-bg"],
html.chatfaces-active [class*="bg-stone"],
html.chatfaces-active [class*="bg-cream"],
html.chatfaces-active [class*="react-scroll-to-bottom"],
html.chatfaces-active [class*="sidebar"],
html.chatfaces-active [class*="min-h-screen"],
html.chatfaces-active [class*="overflow-y-auto"],
html.chatfaces-active [class*="overflow-hidden"],
html.chatfaces-active .h-full.w-full,
html.chatfaces-active .flex.h-full,
html.chatfaces-active .flex-1,
html.chatfaces-active .contents,
html.chatfaces-active mat-sidenav-content,
html.chatfaces-active .conversation-container,
html.chatfaces-active [class*="chat-window"],
html.chatfaces-active [class*="response-container"],
html.chatfaces-active [class*="main-container"],
html.chatfaces-active .gmat-body-medium {
  background-color: transparent !important;
  background-image: none !important;
}

/* Deep-nuke inside sidebar + main */
html.chatfaces-active nav *,
html.chatfaces-active aside *,
html.chatfaces-active [class*="sidebar"] *,
html.chatfaces-active main * {
  background-color: transparent !important;
  background-image: none !important;
  background: transparent !important;
}

/* Kill ALL pseudo-element backgrounds/gradients across the entire page */
html.chatfaces-active body *::before,
html.chatfaces-active body *::after {
  background: transparent !important;
  background-color: transparent !important;
  background-image: none !important;
}

/* ══════════════════════════════════════════════════
   Sidebar — light frosted glass tint
   ══════════════════════════════════════════════════ */
html.chatfaces-active nav {
  background-color: rgba(10, 10, 20, 0.25) !important;
  backdrop-filter: blur(4px) !important;
  -webkit-backdrop-filter: blur(4px) !important;
}

/* ══════════════════════════════════════════════════
   iMessage / WhatsApp style chat bubbles
   ══════════════════════════════════════════════════ */

/* ═══ ChatGPT ═══ */

/* User bubble — tinted green, right-aligned tail */
html.chatfaces-active[data-chatfaces-site="chatgpt"] article[data-testid^="conversation-turn-"]:nth-child(odd) {
  background: rgba(34, 120, 100, 0.55) !important;
  border-radius: 18px 18px 4px 18px !important;
  margin-left: auto !important;
  margin-right: 16px !important;
  max-width: 80% !important;
  padding: 12px 16px !important;
  margin-bottom: 8px !important;
  backdrop-filter: blur(6px) !important;
  -webkit-backdrop-filter: blur(6px) !important;
}

/* Assistant bubble — dark, left-aligned tail */
html.chatfaces-active[data-chatfaces-site="chatgpt"] article[data-testid^="conversation-turn-"]:nth-child(even) {
  background: rgba(30, 30, 50, 0.60) !important;
  border-radius: 18px 18px 18px 4px !important;
  margin-right: auto !important;
  margin-left: 16px !important;
  max-width: 85% !important;
  padding: 12px 16px !important;
  margin-bottom: 8px !important;
  backdrop-filter: blur(6px) !important;
  -webkit-backdrop-filter: blur(6px) !important;
}

/* Input bar */
html.chatfaces-active[data-chatfaces-site="chatgpt"] form {
  background: rgba(15, 15, 30, 0.55) !important;
  border-radius: 16px !important;
  backdrop-filter: blur(6px) !important;
  -webkit-backdrop-filter: blur(6px) !important;
}

/* ═══ Claude ═══ */

html.chatfaces-active[data-chatfaces-site="claude"] [data-testid="user-message"],
html.chatfaces-active[data-chatfaces-site="claude"] .font-user-message {
  background: rgba(34, 120, 100, 0.55) !important;
  border-radius: 18px 18px 4px 18px !important;
  padding: 12px 16px !important;
  margin-bottom: 8px !important;
  backdrop-filter: blur(6px) !important;
  -webkit-backdrop-filter: blur(6px) !important;
}

html.chatfaces-active[data-chatfaces-site="claude"] [data-testid="assistant-message"],
html.chatfaces-active[data-chatfaces-site="claude"] .font-claude-message {
  background: rgba(30, 30, 50, 0.60) !important;
  border-radius: 18px 18px 18px 4px !important;
  padding: 12px 16px !important;
  margin-bottom: 8px !important;
  backdrop-filter: blur(6px) !important;
  -webkit-backdrop-filter: blur(6px) !important;
}

html.chatfaces-active[data-chatfaces-site="claude"] [class*="ProseMirror"],
html.chatfaces-active[data-chatfaces-site="claude"] fieldset {
  background: rgba(15, 15, 30, 0.55) !important;
  border-radius: 16px !important;
  backdrop-filter: blur(6px) !important;
  -webkit-backdrop-filter: blur(6px) !important;
}

/* ═══ Gemini ═══ */

html.chatfaces-active[data-chatfaces-site="gemini"] .query-content,
html.chatfaces-active[data-chatfaces-site="gemini"] .user-query {
  background: rgba(34, 120, 100, 0.55) !important;
  border-radius: 18px 18px 4px 18px !important;
  padding: 12px 16px !important;
  margin-bottom: 8px !important;
  backdrop-filter: blur(6px) !important;
  -webkit-backdrop-filter: blur(6px) !important;
}

html.chatfaces-active[data-chatfaces-site="gemini"] message-content,
html.chatfaces-active[data-chatfaces-site="gemini"] .response-container-content,
html.chatfaces-active[data-chatfaces-site="gemini"] .conversation-turn {
  background: rgba(30, 30, 50, 0.60) !important;
  border-radius: 18px 18px 18px 4px !important;
  padding: 12px 16px !important;
  margin-bottom: 8px !important;
  backdrop-filter: blur(6px) !important;
  -webkit-backdrop-filter: blur(6px) !important;
}

html.chatfaces-active[data-chatfaces-site="gemini"] .input-area-container,
html.chatfaces-active[data-chatfaces-site="gemini"] rich-textarea {
  background: rgba(15, 15, 30, 0.55) !important;
  border-radius: 16px !important;
  backdrop-filter: blur(6px) !important;
  -webkit-backdrop-filter: blur(6px) !important;
}

/* ══════════════════════════════════════════════════
   Text readability
   ══════════════════════════════════════════════════ */

/* Chat message text */
html.chatfaces-active article[data-testid^="conversation-turn"] *,
html.chatfaces-active [data-testid="user-message"] *,
html.chatfaces-active [data-testid="assistant-message"] *,
html.chatfaces-active .font-claude-message *,
html.chatfaces-active .font-user-message *,
html.chatfaces-active message-content *,
html.chatfaces-active .conversation-turn * {
  color: #e8e8ee !important;
}

/* Sidebar text + icons */
html.chatfaces-active nav *,
html.chatfaces-active aside *,
html.chatfaces-active [class*="sidebar"] *,
html.chatfaces-active mat-sidenav * {
  color: #e8e8f0 !important;
  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.7) !important;
}

/* Sidebar hover */
html.chatfaces-active nav a:hover,
html.chatfaces-active nav li:hover,
html.chatfaces-active nav button:hover {
  background-color: rgba(255, 255, 255, 0.08) !important;
}
